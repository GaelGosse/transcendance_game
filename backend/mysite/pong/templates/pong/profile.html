{% extends 'base.html' %}

{% load static %}

{% block css%}
	<style>
		h1
		{
			width: 50vw;
			margin: 5% auto;
			display: block;
			color: white;
		}
		main *
		{
			color: white;
		}
		main img
		{
			width: 100px;
			height: 100px;
			border-radius: 100px;

			font-size: 0;

			background-size: contain !important;
			background-repeat: no-repeat !important;
			background-position: center center !important;
			box-shadow:
				0 0 15px black,
				0 0 15px black;
		}
		main .name
		{
			font-size: 22px;
			color: var(--orange);
			text-shadow: 0 0 5px #000;
		}
		main p
		{
			margin: 2% 0;
			display: inline-block;
		}
		main a,
		input[type="submit"]
		{
			border-radius: 50px;
			background: var(--input);

			color: var(--blue);
			text-decoration: none;

			padding: 1% 3% ;
		}
		main a:hover,
		input[type="submit"]:hover
		{
			text-shadow:
			 0 0 5px var(--dark_blue),
			 0 0 5px var(--dark_blue);
			box-shadow: inset 0 -15px 15px #0008;
		}
		fieldset
		{
			width: 100%;
		}
		.fieldset
		{
			border: solid 1px white;
			background: rgba(0, 0, 0, 0.5);

			max-width: 900px;
			margin: 2% auto;
			padding: 20px;
			position: relative;
		}
		.fieldset:first-of-type
		{
			display: flex;
			justify-content: space-around;
			align-items: center;
			flex-direction: row;
		}
		.fieldset legend
		{
			position: absolute;
			top: 0%;
			left: 50%;
			transform: translate(-50%, -50%);

			background: white;
			color: #222;

			width: max-content;
			padding: 0.5% 1%;
			font-size: 16px;
		}
		.fieldset p
		{
			display: block;
			text-align: center;
			/* margin: 2% auto; */
		}
		input[type="submit"],
		.fieldset:last-of-type a
		{
			display: block;
			margin: 0 auto;
			width: max-content;
		}
	</style>
{% endblock css %}

{% block content %}

<div class="fieldset">
	{% if user_info.user_avatar %}
		<img style="background: url('{{ user_info.user_avatar }}') rgba(255, 255, 255, 0.25)" alt="Avatar" />
	{% else %}
		<img src="{% static 'pong/image/profil_default.png' %}" alt="Default Avatar" />
	{% endif %}
	<p class="name">{{user_info.user_pseudo}}</p>
	<a href="/logout">logout</a>
</div>

<form action="{% url 'profile' %}" method="post" class="fieldset">
	{% csrf_token %}
	<fieldset>
		<legend>2FA</legend>
		<p>actual status :
			{% if user_info.user_choice %}
				<span>enable</span>
			{% else %}
				<span>disable</span>
			{% endif %}
		</p>

		{% if user_info.user_choice %}
		<p>
			<label for="option2">disabled</label>
			<input type="checkbox" name="options" value="disabled">
		</p>
		{% else %}
		<p>
			<label for="option1">enabled</label>
			<input type="checkbox" name="options" value="enabled">
		</p>
		{% endif %}

		<input type="submit" value="Submit">

		{% if user_info.user_choice %}
			<p>scan this QR code in your authentificator app to sync in, at your next connexion you will use your authentificator in order to login</p>
			<img src="data:image/png;base64,{{ user_info.user_url|safe }}" alt="QR Code">
		{% endif %}
	</fieldset>
</form>


<div class="fieldset">
	<legend>Friends</legend>
	{% if user_info.user_friends %}
		<ul>
			{% for friend in user_info.user_friends %}
				<li>{{ friend.pseudo }}</li>
			{% endfor %}
		</ul>
		<a href="{% url 'delete_friends' %}">delete a friend </a>
	{% else %}
		<p>you have no friends yet.</p>
	{% endif %}
	<a href="{% url 'add_friends' %}">add friends </a>
</div>

{% endblock %}